<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz History</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; margin: 0; background-color: #E0E7FF; display:flex; justify-content:center; padding:2rem; }
    .history-container { background:#fff; padding:2rem; border-radius:15px; width:95%; max-width:1000px; box-shadow:0 10px 25px rgba(0,0,0,0.2); }
    .history-header { color:#4857a2; margin-bottom:1.5rem; border-bottom:1px solid #ddd; padding-bottom:1rem; text-align:center; }
    table { width:100%; border-collapse:collapse; margin-top:1rem; }
    th, td { padding:0.8rem; border-bottom:1px solid #ddd; text-align:center; }
    th { background-color:#4857a2; color:#fff; font-weight:600; }
    tr:hover { background-color:#f1f1f1; }
    .back-link { display:inline-block; margin-top:1.5rem; text-decoration:none; background:#4857a2; color:#fff; padding:0.7rem 1.2rem; border-radius:8px; transition:0.3s; }
    .back-link:hover { background:#3043a2; }
  </style>
</head>
<body>
<div class="history-container">
  <div class="history-header">
    <h1><i class="fas fa-history"></i> Quiz History</h1>
  </div>

  <table>
    <tr>
      <th>Topic</th>
      <th>Subtopic</th>
      <th>Difficulty</th>
      <th>Quizzes Taken</th>
      <th>Average Score</th>
    </tr>
    {% for h in history %}
    <tr>
      <td>{{ h.topic }}</td>
      <td>{{ h.subtopic }}</td>
      <td>{{ h.difficulty }}</td>
      <td>{{ h.quizzes_taken }}</td>
      <td>{{ h.avg_score|floatformat:2 }}%</td>
    </tr>
    {% empty %}
    <tr><td colspan="5">No history available.</td></tr>
    {% endfor %}
  </table>

  <a href="{% url 'user_dashboard' %}" class="back-link"><i class="fas fa-arrow-left"></i> Back to Dashboard</a>
</div>
</body>
</html>
